<!DOCTYPE HTML>
<html>

<head>
    <title>Buffer Layer</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="/fontawesome/css/solid.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!--FAVICON-->
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png" />
    
    <script type="text/javascript" src="/js/jquery-3.4.0.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js" charset="utf-8"></script>
</head>
    
    
<body>
    
    <!-- HEADER BEGIN -->
    <header id="header">
        <nav class="navbar navbar-expand-sm fixed-top bg-dark navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="/index.html">
                    <h3><span style="color:DodgerBlue">NITC</span>base</h3>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse " id="collapsibleNavbar">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/documentation.html">Documentation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/roadmap.html">Roadmap</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about.html">About Us</a>
                    </li>
                </ul>
                </div>  
            </div>
        </nav>
    </header>
    <!-- END OF HEADER -->
    
    <!-- CONTENT BEGIN -->
    <div id="content">
        <div class="container-fluid">
            <div class="row">
                
                <!-- SIDEBAR BEGIN -->
                <div class="col-md-2">
                    <nav class="navbar navbar-expand-md sticky-top sticky-offset">
                        <button class="navbar-toggler sticky-top sticky-offset" type="button" data-toggle="collapse" data-target="#collapsibleSidebar">
                            <i class="fas fa-align-left"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="collapsibleSidebar">
                        <ul class="nav flex-column sidemenu">
                            <li> <a class="sec" href="#layout"> Layout</a></li>
                            <li> <a class="sec" href="#block_structures"> Block Structures</a></li>
                            <li> <a class="sec" href="#buffer_class"> Class Buffer</a></li>
                            <ul>
                                <li><a href="#getfreerecblk">getFreeRecBlock()</a> </li>
                                 <li><a href="#getfreeindinternal">getFreeIndInternal()</a> </li>
                                 <li><a href="#getfreeindleaf">getFreeIndLeaf()</a> </li>
                                 <li><a href="#getrecblk">getRecBlock()</a> </li>
                                 <li><a href="#getindblk">getIndBlock()</a> </li>
                                <li><a href="#deleteblk">deleteBlock()</a> </li>
                                <li><a href="#releaseblk">releaseBlock()</a> </li>
                                <li><a href="#getfreebuffer">getFreeBuffer()</a> </li>
                            </ul>
                            <li> <a class="sec" href="#blkbuff_class"> Class BlockBuffer</a></li>
                            <ul>
                                <li><a href="#getheader">getHeader()</a> </li>
                                <li><a href="#setheader">setHeader()</a> </li>
                                <li><a href="#getdataptr">get_buf_ptr()</a> </li>
                            </ul>
                            <li> <a class="sec" href="#recbuff_class"> Class RecBuffer</a></li>
                            <li> <a class="sec" href="#indbuff_class"> Class IndBuffer</a></li>
                            <li> <a class="sec" href="#intbuff_class"> Class IndInternal</a></li>
                            <li> <a class="sec" href="#leafbuff_class"> Class IndLeaf</a></li>
                            <li> <a class="sec" href="#misc"> Miscellaneous</a></li>
                        </ul>
                        </div>
                    </nav>
                </div>
                <!-- END OF SIDEBAR -->
                
                <!--MAIN CONTENT START-->
                <div class="col-md-10">
                    <div id="top">
                        <!-- PAGE STARTS -->
                        
                         <div class="pagetitle">
                            <h1>Buffer Layer</h1>
                         </div>
                        
                         <div id="layout" class="detail">
                         	<h2>Layout</h2>
                            <p>Whenever NITCbase needs to work on a disk block, the block has to be first fetched from the <a href="../storage-model.html">disk</a>(secondary storage) to the primary memory. A large pool of memory (called buffer in the documentation) is pre-allocated and managed  to hold copies of disk blocks in the memory.  When a request comes from any of the higher layers to the buffer layer involving access/update of a disk block, the corresponding disk block is loaded into the memory buffer.   After performing updates, the disk block has to be commited back to the disk. The disk interface functions of the <a href="../storage-model.html">physical layer</a> are used by the buffer layer to load blocks from the disk to the buffer and back.  </p>   
                                
                             <p>NITCbase uses a dedicated buffer layer for the above task. All the requests involving disk blocks should go through the buffer layer. The interface provided by the buffer layer gives a <i>memory disk abstraction</i> to the higher layers of the system. NITCbase pre-allocates memory for holding 32 blocks in its buffer memory. Buffer Layer is responsible for maintaining the buffer memory and making replacements and writebacks as required. NITCbase follows Object Oriented design for Buffer layer whose class diagram is shown below.</p>
    
                             
                         	<center><img class="img-fluid" src="/img/buffer_class.png"></center>
                             <br><br>
                             <p>Certain structure definitions and functions that help access of record data in disk block (and meta data  as well) are also included in the buffer layer.  These are discussed at the end of this page (see
                                 <a href="#misc">miscellenious</a> section).</p>
                         </div>
                        
                        <div id="block_structures" class="detail">
                            <h2>Block Structures</h2>
                            <p>The buffer layer defines the following block data structures. </p>
                            <ol>
                                <li>HeadInfo</li>
                                <li>Attribute</li>
                                <li>InternalEntry</li>
                                <li>Index</li>
                            </ol>
                            <p>Each structure is designed to store a subset of the data within a disk block.  A disk block contains 2048 bytes of data. Higher layer functions typically request for access of a particular set of related data in a disk block at a time (and not the whole data together).  Whenever such a "selective access" request is made, the buffer layer method implementing the access functionality will pack the requested data into a structure of the corresponding kind that is designed to store the required data. Variables of these structures will be declared in <a href="cache.html">Cache layer</a>, <a href="blockaccess.html">Block access layer</a> and <a href="b+tree.html">B+ tree layer</a>. </p>
                            
                            <h4>HeadInfo</h4>
                            <p>NITCbase maintains a fixed size header for every disk block. This header stores meta information like type of the block and few block specific information like #Attributes and #Slots. Though the header has many fields, usage of the fields depends on the type of the block. HeadInfo is the structure that collects all the entries of the header as shown below. The size of the header is 32 bytes. The <i><a href="#setheader" target="_blank">setHeader()</a></i> function expects a pointer to <i>struct HeadInfo</i> to be supplied by the calling higher layer functions as an argument. The <i><a href="#getheader" target="_blank">getHeader()</a></i> function returns a  pointer to <i>struct HeadInfo</i>.</p> 
                            
                            <p> <b>Implementation note:</b> <i>setHeader()</i> expects the higher layer to allocate memory for struct HeadInfo before calling it.</p>
                            <div class="code">
                                <pre><code>struct HeadInfo{
	int32_t blockType;
	int32_t pBlock;
	int32_t lBlock;
	int32_t rBlock;
	int32_t numEntries;
	int32_t numAttrs; //not useful for index block
	int32_t numSlots;
	unsigned char reserved[4];
};
/* #include &lt;cstdint&gt; must be done */ 
</code></pre>
                            </div>
                            <h4>Attribute</h4>
                            <p>According to the physical layer storage model for <a href="/storage-model.html#record_blk" target="_blank">record block</a>, each block has slots for storing records and each record contains a set of  <b>Attributes</b>. The structure Attribute is used to hold an attribute in memory. Since an attribute can be one among different types (integar/ float/ string), <i>Attribute</i> is a union of values of all the three types. Size of an Attribute is 16 bytes. A record will be an array of Attributes whose size is equal to the number of attributes in the relation.  An attribute being a fundamental unit of data in a record, the <i>Attribute</i> structure is used in several functions of NITCbase. </p>
                            <div class="code">
                                <pre><code>typedef union Attribute{
	int iVal;
	float fVal;
	char strVal[ATTR_SIZE];
} Attribute;</code></pre>
                            </div>
                            <h4>InternalEntry</h4>
                            <p>Each <a href="/storage-model.html#intind_blk" target="_blank">Internal index block</a> of a <a href="https://en.wikipedia.org/wiki/B%2B_tree" target="_blank">B+ tree</a> consists of many attribute values and child pointers. This data is arranged in the block in such a way that each attribute value is stored between its left child and right child pointers (The right child value of one attribute will be the same as the left child of the next attribute. Hence only one copy is stored making the data overlapped). The combination (left child, attribute value, right child) is called an Internal Entry. An Internal Index block is a combination of 100 such (overlapped) entries. The structure of <i>InternalEntry</i> is given below. The <i><a href="#intsetentry" target="_blank">setEntry()</a></i> method of the class <i><a href="#intbuff_class">IndInternal</a></i> expects a pointer to <i>struct InternalEntry</i> to be supplied by the calling higher layer functions as an argument while the <i><a href="#intgetentry" target="_blank">getEntry()</a></i> method returns a pointer to struct <i>struct InternalEntry</i>.</p>
                            <p><b>Implementation note:</b> The functions <i>getEntry()</i> and <i>setEntry()</i> are declared in the class <a href="#indbuff_class">IndBuffer</a> and are <a href="https://en.wikipedia.org/wiki/Method_overriding" target="_blank">overridden</a> in the class <i><a href="#intbuff_class">IndInternal</a></i>. <i>setEntry()</i> expects the higher layer to allocate memory for struct <i>InternalEntry</i> before calling it. </p>
                            <div class="code">
                                <pre><code>struct InternalEntry{
	int32_t lChild;
	union Attribute attrVal;
	int32_t rChild;
};
/* #include &lt;cstdint&gt; must be done */ </code></pre>
                            </div>
                            <h4>Index</h4>
                            <p>Any index of to a relation should store a reference to the record in the relation along with the corresponding attribute value(s). NITCbase uses (block#, slot#) pair for referencing any record. which is known as Record Id. In NITCbase, an Index is a combination of attribute value, block# and slot# followed by some unused space left for future use. Each <a href="/storage-model.html#leafind_blk" target="_blank">leaf index block</a> is a combination of 63 such Index entries. The structure of Index is given below. 
				     The <i><a href="#intsetentry" target="_blank">setEntry()</a></i> method of the class <i>struct Index</i> expects a pointer to <i>struct Index</i> to be supplied by the calling higher layer functions as an argument while the <i><a href="#intgetentry" target="_blank">getEntry()</a></i> method returns a pointer to <i>struct Index</i>.
                            </p>
                            <p><b>Implementation note:</b> The functions <i>getEntry()</i> and <i>setEntry()</i> are declared in the class <a href="#leafbuff_class">LeafBuffer</a> and are <a href="https://en.wikipedia.org/wiki/Method_overriding" target="_blank">overridden</a> in the class <i><a href="#leafbuff_class">LeafBuffer</a></i>. <i>setEntry()</i> expects the higher layer to allocate memory for struct <i>Index</i> before calling them. </p>
                            <div class="code">
                                <pre><code>struct Index{
	union Attribute attrVal;
	int32_t block;
	int32_t slot;
	unsigned char unused[8];
};
/* #include &lt;cstdint&gt; must be done */ </code></pre>
                            </div>
                            
                        </div>
                         
                         <div id="buffer_class" class="detail">
                         	<h2>class StaticBuffer</h2>
                             <p>The class <i>Buffer</i> contains as a private field a two dimensional array of unsigned characters <i>blocks[32][BLOCK_SIZE]</i>, of size sufficient to store 32 disk blocks in memory. Logically  <i>blocks[i]</i> can be used to buffer one disk block for each 0 &le; i &le; 31. (Each entry of <i>blocks</i>,  <i>block[i]</i>, is referred to as <b>buffer block</b> in the NITCbase documentation.) Buffer blocks will be committed back to disk whenever needed. In addition to storing the data of a block, <i>Buffer</i> class also maintains some meta information for each block. The structure storing the meta information is <i>BufferMetaInfo</i>. This structure contains the  <i>block_num</i> (the block# of the corresponding block in the disk), a <i>dirty flag</i> (indicating whether the block is modified) and a <i>free flag</i> (indicating whether the buffer is free). In addition to these fields, some additional fields like timestamp are required in BufferMetaInfo to be used for Buffer replacement purpose.[YET TO BE DESIGNED] </p>
                             <div class="code">
                                <pre><code>struct BufferMetaInfo {
	bool free;
	bool dirty;
	int blockNum;
	int timeStamp
};</code></pre>
                             </div>
                             <p>Buffer also maintains a copy of the <a href="/storage-model.html#disk_model" target="_blank"> Block Allocation map</a> in the memory. It is an array of size <a href="/constants.html#constants" target="_blank">DISK_BLOCKS</a> where i<sup>th</sup> entry specifies whether i<sup>th</sup> block is occupied(allotted) or free(not alloted). All the data including block allocation map is private to the Buffer class and can be accesses only through public interfaces(methods). This class basically provides the basic disk "fetch and commit" interfaces to upper layers giving a feeling that the disk is in the memory. Buffer is a static class (i.e., all fields and methods are declared static in C++) in NITCbase.  Consequently, there exists only a single static object of the class<span style="color: dodgerblue">*</span>. The class defnition of Buffer class along with public methods is given below:</p>
                             
                             <p><b>Note:</b> The <i>BlockBuffer</i> class is a friend class to Buffer so that all methods in <i>BlockBuffer</i> can access private methods of Buffer layer. It is explained in the next section.</p>
                             
                             <p><b><span style="color: dodgerblue">*</span>Implementation note:</b>  In the case of the class <i>Buffer</i>, only a single instance of this class needs to be created when NITCbase is running. One of the ways of implementing such a class is to declare all member fields and methods of the class <b>static</b>. By doing so, memory will be allocated <a href="https://en.wikipedia.org/wiki/Static_variable" target="_blank">statically</a> for all variables of the class and any access to the member fields of the class will refer to the same statically allocated memory for the member field.  As the methods of the class are <a href="https://en.wikipedia.org/wiki/Method_(computer_programming)#Static_methods" target="_blank">static</a>, C++ allows them to  be accessed using  the semantics <i>classname::methodname()</i>  (instead of <i>objectinstance->methodname()</i> as in the case of methods that are not declared statically).  Static methods in a class are allowed to access only static members of the class. Since the class is static, you need to create only a single object  of the class whose sole purpose is to run the <a href="https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming)">constructor</a> and the <a href="https://en.wikipedia.org/wiki/Destructor_(computer_programming)">destructor</a>.</p>
                             <div class="code">
                                <pre><code>class StaticBuffer {
friend class BlockBuffer;
private:
	//fields
	static unsigned char blocks[32][BLOCK_SIZE];
	static struct BufferMetaInfo metainfo[32];
	static unsigned char blockAllocMap[DISK_BLOCKS];

	//methods
	
	static int getFreeBuffer(int blockNum);
	static int getBufferNum(int blockNum);
	

public:
	//methods
	StaticBuffer();
	~StaticBuffer();
};</code></pre>
                             </div>
                         	<br>
                             <p>The specifications of the methods of Buffer class follows:</p>
                             <ul class="methods">
                                 <li>
                                    <div class="detail" id="buffer-constructor">
                                        <h2>StaticBuffer (Constructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <p>Nil</p>
                                        <h5>Description:</h5>
                                        <p>Copies block allocation map from disk to buffer and updates metainformation of each buffer to initial empty conditions. </p>
                                        <h5><a data-toggle="collapse" href="#algo-buffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-buffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>StaticBuffer::StaticBuffer(){
    // copy all <a href="../storage-model.html#disk_model">block_alloc_map</a> blocks from disk to buffer (using <a href="../storage-model.html#access-methods">readblock()</a> of disk)

    //initialise metainfo of all the buffer blocks with dirty:false, free:true, timestamp:-1 and blockNum:-1
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="buffer-destructor">
                                        <h2>~StaticBuffer (Destructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>                            
                                        <h5>Return type:</h5>
                                        <p>Nil</p>
                                        <h5>Description:</h5>
                                        <p>Copies block allocation map back to the disk from buffer and the blocks which were modified in the buffer are written back to the disk.</p>
                                        <h5><a data-toggle="collapse" href="#algo-buffer-destructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-buffer-destructor" class="collapse">
                                            <div class="code">
                                                <pre><code>StaticBuffer::~StaticBuffer(){
    // copy all <a href="../storage-model.html#disk_model">block_alloc_map</a> blocks from buffer disk to(using <a href="../storage-model.html#access-methods">writeblock()</a> of disk)

    /*iterate through all the buffer blocks, blocks with meta info as free:false,dirty:true
        should be commited/written back to disk(using writeblock() of disk)*/
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
				     
				     
				 
                                 
                                 <li>
                                    <div class="detail" id="getfreebuffer">
                                        <h2><i>private: </i>getFreeBuffer</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>blockNum</td>
                                                    <td>int</td>
                                                    <td>Block number of the block to be loaded to the buffer.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>bufferNum</td>
                                                    <td>int</td>
                                                    <td>Buffer number of the free buffer to which the block is loaded.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Description:</h5>
                                        <p>Searches for a free buffer block. If no buffer blocks are found it does replacement to make a buffer block free (this function <b>never fails</b>) and returns the buffer index.</p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-getfreebuff"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getfreebuff" class="collapse">
                                            <div class="code">
<pre><code> int StaticBuffer::getFreeBuffer(int blockNum){
    // Increase the time stamps in metainfo of all the occupied buffers.
    
    // If free buffer is available, bufferIndex is the index of the free buffer.
    
    // If free buffer is not available, bufferIndex is the index of the buffer with the largest timestamp. If the dirty bit of this buffer is set, perform write back operation to disk.
    
    //update the <i>metainfo</i> array corresponding to the buffer index. 
    
    //return the buffer index
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
				 
				     
				     
				     
				 
                                 
                                 <li>
                                    <div class="detail" id="getbuffernum">
                                        <h2><i>private: </i>getBufferNum</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>blockNum</td>
                                                    <td>int</td>
                                                    <td>Block number that is used retrieve it's corresponding buffer index.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>bufferNum</td>
                                                    <td>int</td>
                                                    <td>Buffer number of the buffer to which the block with the given block number is loaded.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Description:</h5>
                                        <p>A private method which returns the buffer index of the buffer to which the block with the given block number is loaded.</p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-getfreebuff"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getfreebuff" class="collapse">
                                            <div class="code">
<pre><code> int StaticBuffer::getBufferNum(int blockNum){
    //By traversing through the metainfo array, find the buffer index of the buffer to which the block with the given block number is loaded.
    
    //if found return buffer index, else indicate failure.
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
				     
                                 <!-- 
                                <li><div class="detail" id="getfreerecblk">
                                    <h2><i>public:</i> getFreeRecBlock</h2>
                                    <h5>Arguments:</h5>
                                    <p>NIL</p>

                                    <h5>Return value:</h5>
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-hover">
                                            <tr>
                                                <td><a href="#recbuff_class">RecBuffer</a> *</td>
                                                <td>Returns a pointer to a new RecBuffer object</td>
                                            </tr>
                                            <tr>
                                                <td>NULL</td>
                                                <td>If free disk block is not available. (disk full)</td>
                                            </tr>
                                        </table>
                                    </div>

                                    <h5>Description:</h5>
                                    <p>This method searches for the free block in disk, loads the disk block to buffer and assigns the free block found to be REC type and returns the RecBuffer object pointer corresponding to loaded block in buffer.</p>

                                    <h5><a data-toggle="collapse" href="#algo-getfreerecblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                    <div id="algo-getfreerecblk" class="collapse">
                                        <div class="code">
                                            <pre><code>class RecBuffer* Buffer::getFreeRecBlock(){

    // search for the free block in disk iterating through <i>block_alloc_map</i> array.

    //if no disk block is free return NULL

    //get the free buffer block using <i><a href="#getfreebuffer">getfreebuffer()</a></i> in the class <i>buffer</i>
    
    //Update the <i>block_alloc_map</i> correspoding to free disk block.

    class <i>RecBuffer* newRecBuffer</i>= new <i>RecBuffer(disk_free_block)</i>; 
    //where disk_free_block is the free disk block obtained from block_alloc_map.

    // return <i>newRecBuffer</i>.
}</code></pre>
                                        </div>
                                    </div>
                                    </div></li>
                                 
                                 <li>
                                    <div class="detail" id="getfreeindinternal">
                                         <h2><i>public:</i> getFreeIndInternalBlock</h2>
                                        <h5>Arguments:</h5>
                                        <p>NIL</p>

                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#intbuff_class">IndInternal</a> *</td>
                                                    <td>Returns a pointer to a new IndInternal object</td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>If free disk block is not available. (disk full)</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method searches for the free block in disk, loads the disk block to buffer and assigns the free block found to be IND_INTERNAL type and returns the IndBuffer object pointer corresponding to loaded block in buffer.</p>
                                        <h5><a data-toggle="collapse" href="#algo-getfreeindinternal"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getfreeindinternal" class="collapse">
                                            <div class="code">
                                                <pre><code>class IndInternal* Buffer::getFreeIndInternal(){

    // search for the free block in disk iterating through <i>block_alloc_map</i> array.

    //if no disk block is free return NULL

    //get the free buffer block using <i><a href="#getfreebuffer">getfreebuffer()</a></i> in the class <i>buffer</i>
    
    //Update the <i>block_alloc_map</i> correspoding to free disk block.

    class <i>RecBuffer* newIndBuffer</i>= new <i><a href="#intbuff_class">IndInternal</a>(disk_free_block)</i>; 
    //where disk_free_block is the free disk block obtained from block_alloc_map.

    // return <i>newIndBuffer</i>.
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="getfreeindleaf">
                                        <h2><i>public:</i> getFreeIndLeafBlock</h2>
                                        <h5>Arguments:</h5>
                                        <p>NIL</p>

                                        
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#leafbuff_class">IndLeaf</a> *</td>
                                                    <td>Returns a pointer to a new IndLeaf object</td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>If free disk block is not available. (disk full)</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method searches for the free block in disk, loads the disk block to buffer and assigns the free block found to be IND_LEAF type and returns the IndBuffer object pointer corresponding to loaded block in buffer.</p> 
                                        <h5><a data-toggle="collapse" href="#algo-getfreeindleaf"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getfreeindleaf" class="collapse">
                                            <div class="code">
                                                <pre><code>class IndLeaf* Buffer::getFreeIndLeaf(){

    // search for the free block in disk iterating through <i>block_alloc_map</i> array.

    //if no disk block is free return NULL

    //get the free buffer block using <i><a href="#getfreebuffer">getfreebuffer()</a></i> in the class <i>buffer</i>
    
    //Update the <i>block_alloc_map</i> correspoding to free disk block.

    class <i>RecBuffer* newIndBuffer</i>= new <i><a href="#leafbuff_class">IndLeaf</a>(disk_free_block)</i>; 
    //where disk_free_block is the free disk block obtained from block_alloc_map.

    // return <i>newIndBuffer</i>.
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="getrecblk">
                                        <h2><i>public:</i> getRecBlock</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>block_num</td>
                                                    <td>int</td>
                                                    <td>Disk block number of Record block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        
                                        <h5>Return value:</h5>
                                        <div class=table-responsive>
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#recbuff_class">RecBuffer</a> *</td>
                                                    <td>Returns a pointer to the RecBuffer object corresponding to the block_num</td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>Provided block_num is not in the range of disk blocks.</td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>If the requested block is not a valid Record Block (can be a free block or any Index Block)</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method gets the specfied record block into buffer(if not present) and returns RecBuffer object pointer corresponding to the disk block in buffer.</p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-getrecblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getrecblk" class="collapse">
                                            <div class="code">
                                                <pre><code>class RecBuffer* Buffer::getRecBlock(int block_num){
    /*iterate in buffer blocks to know if one of the blocks in buffer already contains the disk block
     #block_num (you may write a helper function getbufferblock(#block_num) to check if the buffer 
     contains the disk block correspond to #block_num) */

	/* if buffer doesn't contain disk block #block_num, get a free buffer using 
    <i><a href="#getfreebuffer">getFreeBuffer</a></i>() method and load the block into 
    the buffer block using physical layer <i><a href="/storage-model.html#access-methods">readblock</a></i>() function. */

    //if the block corresponding to #block_num is not a REC block return NULL

    class<i> RecBuffer* newRecBuffer</i>= new <i>RecBuffer</i>(block_num);

    // return <i>newRecBuffer</i>.
}</code></pre>
                                            </div>
                                        </div>
                                     </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="getindblk">
                                        <h2><i>public:</i> getIndBlock</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>block_num</td>
                                                    <td>int</td>
                                                    <td>Disk block number of Index block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#indbuff_class" >IndBuffer</a> *</td>
                                                    <td>Returns a pointer to the IndInternal/IndLeaf object corresponding to the block_num <br>
                                                        (Returns an object of type IndInternal if the block is an internal Index block / returns an object of type IndLeaf if the block is a Leaf Index block). <br>
                                                        <b>Note: </b>An object of a child class can be assigned to a variable of a parent class.
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>Provided block_num is not in the range of disk blocks.</td>
                                                </tr>
                                                <tr>
                                                    <td>NULL</td>
                                                    <td>If the requested block is not a valid Index Block (can be a free block or a Record Block)</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method gets the specfied index block into buffer(if not present) and returns IndBuffer object pointer corresponding to the disk block in buffer.</p>
                                        <h5><a data-toggle="collapse" href="#algo-getindblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getindblk" class="collapse">
                                            <div class="code">
                                                <pre><code>class IndBuffer* Buffer::getIndBlock(int block_num){
    /*iterate in buffer blocks to know if the buffer already contains the disk block #block_num 
    (you may write a helper function getbufferblock(#block_num) to check if the buffer 
     contains the disk block correspond to #block_num. It will be useful here and elsewhere.) */

	/* if buffer doesn't contain disk block #block_num, get a free buffer using 
    <i><a href="#getfreebuffer">getFreeBuffer</a></i>() method and load the block into 
    the buffer block using physical layer <i><a href="/storage-model.html#access-methods">readblock</a></i>() function. */
    
    //let <i>buffer_block</i> be the buffer index to which the disk block is loaded.

    // let int blk_type = getblocktype(buffer_block) 
        /* you may write a helper function getblocktype(buffer_block) to know block type
        by accessing the header of the block from buffer*/

    if(blk_type==INDINT){
        class <i>IndBuffer* newIndBuffer</i>= new <i><a href="#intbuff_class">IndInternal</a></i>(block_num);
        return newIndBuffer;
    }else if(blk_type==INDLEAF){
        class <i>IndBuffer* newIndBuffer</i>r= new <i><a href="#leafbuff_class">IndLeaf</a></i>(block_num);
        return newIndBuffer;
    }else{
        return NULL; //returns NULL if block found to be other than internal or leaf block
    }
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="deleteblk">
                                        <h2><i>public:</i> deleteBlock</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>block_num</td>
                                                    <td>int</td>
                                                    <td>Disk block number of block that has to be deleted.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>

                                        <h5>Description:</h5>
                                        <p>This method deletes the block corresponding to disk block block_num.</p> 
                                        <h5><a data-toggle="collapse" href="#algo-deleteblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-deleteblk" class="collapse">
                                            <div class="code">
                                                <pre><code>void Buffer::deleteBlock(int block_num){
    // if block_num &lt; 0 OR block_num &gt;= DISK_BLOCKS return

    /* iterate through buffer blocks to know if disk block #block_num is present in Buffer
    (Note: <i>getbufferblock</i>(block_num) method call can be used for the same).*/

    //if buffer contains disk block <i>#block_num</i>, release the buffer block using <i><a href="#releaseblk">releaseBlock</a></i>(int block_num) 

    //set the <i>block_alloc_map</i> array element correspond to block_num as UNUSED
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="releaseblk">
                                        <h2><i>public:</i> releaseBlock</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>block_num</td>
                                                    <td>int</td>
                                                    <td>Disk block number of the block that has to be released from buffer.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>

                                        <h5>Description:</h5>
                                        <p>Description of the function/method</p> 
                                        <h5><a data-toggle="collapse" href="#algo-releaseblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-releaseblk" class="collapse">
                                            <div class="code">
                                                <pre><code>void Buffer::releaseBlock(int block_num){
    // if block_num &lt; 0 OR block_num &gt;= DISK_BLOCKS return 

    /* iterate through buffer blocks to know if disk block <i>#block_num</i> is present in Buffer
    (Note: <i>getbufferblock</i>(block_num) method call can be used for the same).*/

    //if buffer does not contain disk block <i>#block_num</i> return 

    // if the <i>dirty</i> field in <i>metainfo[]</i> of buffer block corresponding to #block_num is set to true
    // Commit the block back to disk.

    // free the buffer block corresponding to #block_num in metainfo array.

}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="get_block_ptr">
                                        <h2><i>private:</i>get_block_ptr</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>block_num</td>
                                                    <td>int</td>
                                                    <td>Disk block number of Record block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        
                                        <h5>Return value:</h5>
                                        <div class=table-responsive>
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>char *</td>
                                                    <td>Returns a pointer to the block present in buffer.</td>
                                                </tr>
                                                
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>Description of the function/method</p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-get_block_ptr"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-get_block_ptr" class="collapse">
                                            <div class="code">
                                                <pre><code>unsigned char* Buffer::get_block_ptr(int block_num){
	int buffer_block=getbufferblock(block_num);
	//if there is no corresponding to <i>block_num</i> in buffer
        //load the block into buffer by using getFreeBuffer() and read()
        //update <i>buffer_block</i> as return value of getFreeBuffer.
	
	//return the address of the buffer block (char *).
}</code></pre>
                                            </div>
                                        </div>
                                     </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="getfreebuffer">
                                        <h2><i>private:</i>getFreeBuffer</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>buffer_num</td>
                                                    <td>int</td>
                                                    <td>Buffer number of the free buffer.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Description:</h5>
                                        <p>This is a private method which searches for a free buffer block. If no buffer blocks are found it does replacement to make a buffer block free. This function <b>never fails</b>.[YET TO BE DESIGNED]</p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-getfreebuff"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getfreebuff" class="collapse">
                                            <div class="code">
<pre><code> int Buffer::getFreeBuffer(){
    // Iterate through all the buffer blocks and search for a free buffer
    
    // If no free buffer block is found perform replacement algorithm [TO BE DESIGNED]
    
    //update the <i>metainfo</i> array corresponding to free buffer. 
    
    //return the buffer index
}
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                             </ul>
                             
                         </div>
                         -->
                         <div id="blkbuff_class" class="detail">
                         	<h2>Class BlockBuffer </h2>
                             <p>The class <i>BlockBuffer</i>  is a generic class for representing a disk block of any type (Record, Internal Index or Leaf Index). Its only field is <i>blockNum</i>. The field <i>blockNum</i> stores the disk block# corresponding to the block buffer object. In order to work with data of the block, any method in <i>Block Buffer</i> or its descendent classes need to know the address (pointer) to the buffer memory where the block has been loaded.  Note that the block will be loaded and stored into one of the 32 buffers in the class <i>StaticBuffer</i>. Adding to the complexity, the block may even not be present in the primary memory because of the buffer replacement algorithm of the buffer layer. Hence any method of this class should first get the pointer to the data block whenever an operation is to be performed on the block. The method <i>getBufferPtr()</i> can be used for this purpose. The public Methods of <i>Block Buffer</i> deals with the information like <a href="#block_structures">header</a> of the disk block which is generic to all blocks of Disk. <i><a href="#recbuff_class">RecBuffer</a></i> and <i><a href="#indbuff_class">IndBuffer</a></i> classes extend the class <i>BlockBuffer</i> thereby inheriting all the fields and methods of <i>Block Buffer</i>.
                         	</p>
                             <p><span style="color: red">*</span><b>Implementation Note:</b> If  the class definition of a class (say A) declares another class (say class B) as a <a href="https://en.wikipedia.org/wiki/Friend_class" target="_blank">friend class</a> then an instance of B can invoke private methods of A. In our case, the definition of the class <i>StaticBuffer</i>  contains the declaration <i>friend BlockBuffer</i>.  Hence, the methods in <i>BlockBuffer</i> is allowed to access the private method of the class <i>StaticBuffer</i>. </p>
                            <div class="code">
                                <pre><code>class BlockBuffer{
protected:
	int blockNum;
	unsigned char *getBufferPtr();
	void getBlock();
	int getFreeBlock(int BlockType);

public:
	int getBlockNum();
	struct HeadInfo* getHeader();
	void setHeader(struct HeadInfo* head);
	int getBlockType();
	void setBlockType(int blockType);
	BlockBuffer(int blockNum);
	BlockBuffer(char blockType);
};</code></pre> 
                            </div>
                            <p>The following is the specification of methods of BlockBuffer</p>
                             <ul class="methods">
                                 <li>
                                    <div class="detail" id="blkbuffer-constructor">
                                        <h2>BlockBuffer (Constructor 1)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blockNum</td>
                                                <td>int</td>
                                                <td>block number of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>Nil</p>
                                        <h5>Description:</h5>
                                        <p>to be called when the block already exists on the disk.</p>
                                        <h5><a data-toggle="collapse" href="#algo-blkbuffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-blkbuffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>Blockbuffer::BlockBuffer(int blockNum){
		    				// set the blockNum field of the object to input argument.

						// copy the block into buffer using getBlock function.
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
				     
				 <li>
                                    <div class="detail" id="blkbuffer-constructor1">
                                        <h2>BlockBuffer (Constructor 2)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blockType</td>
                                                <td>char</td>
                                                <td>block type of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>Nil</p>
                                        <h5>Description:</h5>
                                        <p>to be called if a new block is to be allocated in the disk.</p>
                                        <h5><a data-toggle="collapse" href="#algo-blkbuffer-constructor1"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-blkbuffer-constructor1" class="collapse">
                                            <div class="code">
                                                <pre><code>Blockbuffer::BlockBuffer(char blockType){
    						// allocate a block on the disc and a buffer in memory to hold the new block of given type using getFreeBlock function.

						// set the blockNum field of the object to the allocated block number.
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 

                                 
                                <li>
                                    <div class="detail" id="getdataptr">
                                        <h2><i>protected: </i>getBufferPtr</h2>
                                        <h5>Arguments:</h5>
                                        NIL
                                        <h5>Return type:</h5>
					    unsigned char*
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>char *</td>
                                                    <td>returns the pointer to the block in buffer.</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method gives the the pointer to first byte of the block present in buffer.
					
                                        <h5><a data-toggle="collapse" href="#algo-getdataptr"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getdataptr" class="collapse">
                                            <div class="code">
                                                <pre><code>unsigned char * BlockBuffer::getBufferPtr(){
	
	// find the buffer index of the block using getBufferNum().
	
	// if the block is not present in the buffer, read and load the block to a new buffer using getFreeBuffer() and ReadBlock() of physical layer.
	
	// Increase the time stamps in metainfo of all the occupied buffers.
	
	// Reset the timestamp of the buffer to which the block is loaded.
	
	// return the pointer to this buffer (blocks[bufferIndex]).
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>

				     
				     
				     
				     
                                <li>
                                    <div class="detail" id="getheader">
                                        <h2><i>public:</i> getHeader</h2>
										<h5>Arguments:</h5>
                                        NIL
                                        <h5>Return type:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#block_structures">struct HeadInfo*</a></td>
                                                    <td>returns the pointer to the required Header of the block in terms of struct HeadInfo*.</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method returns the pointer to the header corresponding to the block.</p>
					NOTE: Any type of block(REC/INDINT/INDLEAF) of NITCbase has same header, therefore getheader(),setheader() functions are kept in abstract class BlockBuffer.
					                   
                                        <h5><a data-toggle="collapse" href="#algo-getheader"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getheader" class="collapse">
                                            <div class="code">
                                                <pre><code>struct HeadInfo* BlockBuffer::getheader(){
	/* get the pointer(char *) to the buffer entry of the block. 
    (the protected function <i><a href="#getdataptr">getBufferPtr()</a></i> can be called for this purpose)*/
    
    struct HeadInfo *head;
    
    /*copy the contents of header in block to head (note: header of the block and struct <i>HeadInfo</i> are of same structure,
    use appropriate type casting to copy the header from block to head)*/
    return head;
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
				     
				     
                                <li>
                                    <div class="detail" id="setheader">
                                        <h2><i>public:</i> setHeader</h2>
					<h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>head</td>
                                                    <td><a href="#block_structures">struct HeadInfo*</a></td>
                                                    <td>HeadInfo which needed to be copied into the head of the block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>

                                        <h5>Description:</h5>
                                        <p>This method sets the header corresponding to the block with the one provided in the argument.</p>
                                        <h5><a data-toggle="collapse" href="#algo-setheader"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-setheader" class="collapse">
                                            <div class="code">
                                                <pre><code>void BlockBuffer::setheader(struct HeadInfo *head){
	/* get the pointer(char *) to the buffer entry of the block. 
    (the protected function <i><a href="#getdataptr">getBufferPtr()</a></i> can be called for this purpose)*/
    
	/* copy the contents of variable <i>head</i> to header in the block (note: header of block and struct HeadInfo are of same structure,
	use appropriate type casting to copy the header from head to block)*/
	return;
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
				     
				     
				     
				     
				      <li>
                                    <div class="detail" id="getblk">
                                        <h2><i>public:</i> getBlock</h2>
                                        <h5>Arguments:</h5> NIL
                                        <h5>Return type:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td><a href="#block_structures">int </a></td>
                                                    <td>returns the buffer index corresponding to <i>this.blockNum</i>.</td>
                                                </tr>
                                            </table>
                                        </div>
                                       <h5>Description:</h5>
                                        <p>This method loads the block into buffer(if not present), updates the timestamps and returns the corresponding buffer index. </p>
                                        
                                        <h5><a data-toggle="collapse" href="#algo-getblk"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getblk" class="collapse">
                                            <div class="code">
                                                <pre><code>void BlockBuffer::getBlock(){
						
     //check whether the block is already present in the buffer (using <i>StaticBuffer.getBufferNum</i>() ).
     
     //if present, set the timestamp of the corresponding buffer to 0 and increment the timpestamps of all other occupied buffer in the BufferMetaInfo.
     
     //if not present, get a free buffer (using <i>StaticBuffer.getFreeBuffer</i>() ) and read the block into the free buffer (using <i>readBlock()</i>).
   
}</code></pre>
                                            </div>
                                        </div>
                                     </div>
                                 </li>
				     
				     
				     
				     
				     
				     
			    </ul>
                                                
                         </div>
                         
                         <div id="recbuff_class" class="detail">
                         	<h2>Class RecBuffer</h2>
                         	<p>An object of this class will be associated with a <i><a href="../storage-model.html#record_blk">record block</a></i>. Public Methods of this class deal with access/retrieval of records and slotmap from a record block. <i>RecBuffer class</i> extends the <i><a href="#blkbuff_class">BlockBuffer class</a></i>.
                         	</p>
                             <div class="code">
                                <pre><code>class RecBuffer : public <a href="#blkbuff_class">BlockBuffer</a>{
public:
	RecBuffer(int blk_no);
	void getSlotmap(unsigned char *slotmap);
	void setSlotmap(unsigned char *slotmap);
	void getRecord(union Attribute *rec,int slot_num);
	void setRecord(union Attribute *rec,int slot_num);
};</code></pre>
                             </div>
                             <p>The following is the specification for methods of recBuffer class.</p>
                             <ul class="methods">
                                 <li>
                                    <div class="detail" id="recbuff_constructor">
                                        <h2>RecBuffer (Constructor)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blk_no</td>
                                                <td>int</td>
                                                <td>block number of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p></p>
                                        <h5><a data-toggle="collapse" href="#algo-recbuffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-recbuffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>RecBuffer::RecBuffer(int blk_no) : BlockBuffer(blk_no){} //this is a way to call parent non-default constructor.</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="recbuff_destructor">
                                        <h2>~RecBuffer (Destructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p>Destructor for the class need not be explicitly written as the parent class destructor will be invoked automatically.</p>
                                        <div class="card">
                                            <div class="card-header">
                                                <a data-toggle="collapse" href="#collapse1">
                                                    <b>Q.</b> Why should the constructor be explicitly called while the destructor need not be explicitly invoked?
                                                </a>
                                            </div>
                                            <div id="collapse1" class="collapse">
                                                <div class="card-body">
                                                    In C++, the destructor will invoke the default destructor of the parent class only when it has <b>no arguments</b>. Since the constructor has an argument, we need to explicitly pass the argument to the constructor of the parent class.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 
                                <li>
                                    <div class="detail" id="getslotmap" >
                                        <h2><i>public:</i> getSlotmap</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>slotmap</td>
                                                    <td>char[ATTR_SIZE]</td>
                                                    <td>pointer to an array of type unsigned char whose size must be equal to atleast that of the size of slotmap.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>

                                        <h5>Description:</h5>
                                        <p>This method gives the slotmap of the block to which class object is corresponding to.</p>
                                        <h5><a data-toggle="collapse" href="#algo-getslotmap"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getslotmap" class="collapse">
                                            <div class="code">
                                                <pre><code>void RecBuffer::getSlotmap(unsigned char *slotmap){ 
    /* get the data pointer(chat *) corresponds to the block(of current object) from Buffer. 
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    // let num_of_slots be the number of slots in the block(which can be found in the header).
    // Copy the slotmap from the block to the memory pointed by the argument <i>slotmap</i>
}</code></pre>
                                            </div>
                                        </div>
                                        
                                    </div> 
                                </li>
                                
                                <li>
                                    <div class="detail" id="setslotmap" >
                                        <h2><i>public:</i> setSlotmap</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>slotmap</td>
                                                    <td>char[ATTR_SIZE]</td>
                                                    <td>pointer to an array of type unsigned char whose size is assumed to be equal to that of the size of slotmap.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>

                                        <h5>Description:</h5>
                                        <p>This method sets the slotmap of the block to which class object is corresponding to.</p>
                                        <h5><a data-toggle="collapse" href="#algo-setslotmap"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-setslotmap" class="collapse">
                                            <div class="code">
                                                <pre><code>void RecBuffer::setSlotmap(unsigned char *slotmap){ 
    /* get the data pointer(chat *) corresponds to the block(of current object) from Buffer 
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    // let num_of_slots be the number of slots in the block(which can be found in the header).
    // Copy the slotmap from the memory pointed by the argument <i>slotmap</i> into the block
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
                                 
                                <li>
                                    <div class="detail" id="getrecord" >
                                        <h2><i>public:</i> getRecord</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>record</td>
                                                    <td><a href="#block_structures">union Attribute</a> *</td>
                                                    <td>pointer to an array of type Union Attribute whose size is assumed to be equal to the number of attributes in the relation.</td>
                                                </tr>
                                                <tr>
                                                    <td>slot_num</td>
                                                    <td>int</td>
                                                    <td>slot no. of record in block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On succesful copy of the record.</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If the slot_num is not in the range of number of slots per the block.</td>
                                                </tr>
                                                <tr>
                                                    <td>E_FREESLOT</td>
                                                    <td>If the slot corresponding to the slot_num is free.</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method gives the slot_num'th record of the block.</p>
                                        <h5><a data-toggle="collapse" href="#algo-getrecord"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-getrecord" class="collapse">
                                            <div class="code">
                                                <pre><code>int RecBuffer::getRecord(union Attribute *rec,int slot_num){ 
    /* get the data pointer(char *) corresponds to the block (of the current object) from Buffer 
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/

    // get number of attributes (in corresponding relation) from the <a href="../storage-model.html#record_blk">block header</a>.
    // get number of slots from the block, which is present in the block header.

    // if slot_num is not in the permitted range return E_OUTOFBOUND
    // if slot corresponding to slot_num is free return E_FREESLOT

    // copy the memory contents of <i>slot_num</i><sup>th</sup> record to the memory pointing by <i>rec</i>.

    // return SUCCESS
	
}</code></pre>
                                            </div>
                                        </div>                                        
                                    </div> 
                                </li>
                                 
                                <li>
                                    <div class="detail" id="setrecord" >
                                        <h2><i>public:</i> setRecord</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>record</td>
                                                    <td><a href="#block_structures">union Attribute</a> *</td>
                                                    <td>pointer to an array of type Union Attribute whose size is assumed to be equal to the number of attributes in the relation.</td>
                                                </tr>
                                                <tr>
                                                    <td>slot_num</td>
                                                    <td>int</td>
                                                    <td>slot no. of record in block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On succesful copy of the record into the block.</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If the slot_num is not in the range of number of slots per the block.</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method sets the slot_num'th record of the block with the record sent as argument.</p>
                                        <h5><a data-toggle="collapse" href="#algo-setrecord"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-setrecord" class="collapse">
                                            <div class="code">
                                                <pre><code>void RecBuffer::setRecord(union Attribute *rec,int slot_num){ 
    /* get the data pointer(char *) corresponds to the block (of the current object) from Buffer 
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    
    // get number of attributes (in corresponding relation) from the <a href="../storage-model.html#record_blk">block header</a>.
    // get number of slots from the block, which is present in the block header.

    // if slot_num is not in the permitted range return E_OUTOFBOUND
    // if slot corresponding to slot_num is free return E_FREESLOT

    // copy the memory contents of memory pointing by rec to <i>slot_num</i><sup>th</sup> record.

    // return SUCCESS
	
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
                                 
                             </ul>
                            
                         </div>
                         
                        <div id="indbuff_class" class="detail">
                            <h2>Class IndBuffer</h2>
                            <p>IndBuffer extends <a href="#blkbuff_class">BlockBuffer class</a>. IndBuffer is a generic(abstract) class for Index Blocks. It has two <a href="https://en.wikipedia.org/wiki/Virtual_function#Abstract_classes_and_pure_virtual_functions" target="_blank"><b>pure virtual methods</b></a>- getEntry() and setEntry(). These methods will be overridden in the child classes. The constructor of this class simply calls the constructor of the parent class with the argument received.</p>
                            <div class="code">
                                <pre><code>class IndBuffer : public <a href="#blkbuff_class">BlockBuffer</a>{
public:
	IndBuffer(int blk_no);
	virtual int getEntry(void *ptr, int indexnum) =0;
	virtual int setEntry(void *ptr, int indexnum) =0;
};</code></pre>
                            </div>
                            <ul class="methods">
                                <li>
                                    <div class="detail" id="indbuff_constructor">
                                        <h2>IndBuffer (Constructor)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blk_no</td>
                                                <td>int</td>
                                                <td>block number of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p></p>
                                        <h5><a data-toggle="collapse" href="#algo-indbuffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-indbuffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>IndBuffer::IndBuffer(int blk_no) : BlockBuffer(blk_no){} //this is a way to call parent non-default constructor.</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="indbuff_destructor">
                                        <h2>~IndBuffer (Destructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p>Destructor for the class need not be explicitly written as the parent class destructor will be invoked automatically.</p>
                                    </div>
                                 </li>
                            </ul>
                        </div>
                        
                         <div id="intbuff_class" class="detail">
                         	<h2>Class IndInternal</h2>
                             <p>An object of this class will be associated with an <a href="../storage-model.html#intind_blk">internal index</a> buffer block. Public Methods of this class deal with the entries of <a href="../storage-model.html#intind_blk">Internal Index</a> (<a href="https://en.wikipedia.org/wiki/B%2B_tree">B+ tree</a>) nodes in the buffer. IndInternal class extends <a href="#indbuff_class">IndBuffer</a> class and overrides the virtual methods in IndBuffer class. The constructor calls the constructor of the parent class by passing the argument.
                         	</p>
                             <div class="code">
                                 <pre><code>class IndInternal : public <a href="#indbuff_class">IndBuffer</a>{
public:
	IndInternal(int blk_no);
	int getEntry(void *ptr, int indexnum) ;
	int setEntry(void *ptr, int indexnum) ;
};</code></pre>
                             </div>
                             <p>The following is the specification of the methods of the class.</p>
                             <ul class="methods">
                                 <li>
                                    <div class="detail" id="intindbuff_constructor">
                                        <h2>IndInternal (Constructor)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blk_no</td>
                                                <td>int</td>
                                                <td>block number of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p></p>
                                        <h5><a data-toggle="collapse" href="#algo-intindbuffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-intindbuffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>IndInternal::IndInternal(int blk_no) : IndBuffer(blk_no){} //this is a way to call parent non-default constructor.
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="intindbuff_destructor">
                                        <h2>~IndInternal (Destructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p>Destructor for the class need not be explicitly written as the parent class destructor will be invoked automatically.</p>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="intgetentry">
                                        <h2><i>public:</i> getEntry</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>entry_ptr</td>
                                                    <td>void *</td>
                                                    <td>entry_ptr is assumed to be a pointer to type <a href="#block_structures">InternalEntry</a>.</td>
                                                </tr>
                                                <tr>
                                                    <td>index_num</td>
                                                    <td>int</td>
                                                    <td>index no. of entry in Internal index block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On successful copy of the internal entry</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If index_num is outside the range 0-99</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method gives the index_num'th <i>InternalEntry</i> of the IndInternal block.</p> 
                                        <h5><a data-toggle="collapse" href="#algo-intgetentry"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-intgetentry" class="collapse">
                                            <div class="code">
                                                <pre><code>int IndInternal::getEntry(void *ptr, int index_num){
    /* get the data pointer(char *) corresponding to the block (of current object) from Buffer 
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    

    // if the index_num is not in range of 0-(#Entries(in block)+1) return E_OUTOFBOUND

    // copy the index_num'th Internalentry in block to memory ptr(ptr can be type casted appropriately if needed). 
    
    // return SUCCESS.
	
}</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                 
                                 <li>
                                    <div class="detail" id="intsetentry">
                                        <h2><i>public:</i> setEntry</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>entry_ptr</td>
                                                    <td>void *</td>
                                                    <td>entry_ptr is assumed to be a pointer to type <a href="#block_structures">InternalEntry</a>.</td>
                                                </tr>
                                                <tr>
                                                    <td>index_num</td>
                                                    <td>int</td>
                                                    <td>index no. of entry in Internal index block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On successful copy of the index entry into the block</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If index_num is outside the range 0-99</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method sets the index_num'th <i>InternalEntry</i> of the IndInternal block with the <i>InternalEntry</i> sent as argument.</p>
                                        <h5><a data-toggle="collapse" href="#algo-intsetentry"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-intsetentry" class="collapse">
                                            <div class="code">
                                                <pre><code>int IndInternal::setEntry(void *ptr, int index_num){
    /* get the data pointer(char *) corresponding to the block (of current object) from Buffer
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    

    // if the index_num is not in range of 0-(#Entries(in block)+1) return E_OUTOFBOUND

    // copy the struct InternalEntry pointed by ptr to index_num'th entry in block. 
	
}</code></pre>
                                            </div>
                                        </div>
                                     </div>
                                 </li>
                             </ul>
                        
                         </div>
                         
                         <div id="leafbuff_class" class="detail">
                         	<h2>Class IndLeaf</h2>
                             <p>An object of this class will be associated with an <a href="../storage-model.html#leafind_blk">leaf index</a> buffer block. Public Methods of this class deal with the entries of <a href="../storage-model.html#leafind_blk">leaf index</a> (<a href="https://en.wikipedia.org/wiki/B%2B_tree">B+ tree</a>) nodes in the buffer. IndLeaf class extends <a href="#indbuff_class">IndBuffer</a> class and overrides the virtual methods in IndBuffer class. The constructor calls the constructor of the parent class by passing the argument.</p>
                             <div class="code">
                                <pre><code>class IndLeaf : public <a href="#indbuffer_class">IndBuffer</a>{
public:
	IndLeaf(int blk_no);
	int getEntry(void *ptr, int indexnum) ;
	int setEntry(void *ptr, int indexnum) ;
};</code></pre>
                             </div>
                             <p>The following is the specification of the methods of the class.</p>
                             <ul class="methods">
                                 <li>
                                    <div class="detail" id="leafindbuff_constructor">
                                        <h2>IndLeaf (Constructor)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <td>blk_no</td>
                                                <td>int</td>
                                                <td>block number of the corresponding block</td>
                                            </table>
                                        </div>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p></p>
                                        <h5><a data-toggle="collapse" href="#algo-leafindbuffer-constructor"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-leafindbuffer-constructor" class="collapse">
                                            <div class="code">
                                                <pre><code>IndLeaf::IndLeaf(int blk_no) : IndBuffer(blk_no){} //this is a way to call parent non-default constructor.
</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                 </li>
                                 
                                 <li>
                                    <div class="detail" id="leafindbuff_destructor">
                                        <h2>~IndLeaf (Destructor)</h2>
                                        <h5>Arguments:</h5>
                                        <p>Nil</p>
                                        <h5>Return type:</h5>
                                        <p>void</p>
                                        <h5>Description:</h5>
                                        <p>Destructor for the class need not be explicitly written as the parent class destructor will be invoked automatically.</p>
                                    </div>
                                 </li>
                                 
                                <li>
                                    <div class="detail" id="leafgetentry">
                                        <h2><i>public:</i> getEntry</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-resonsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>entry_ptr</td>
                                                    <td>void *</td>
                                                    <td>entry_ptr is assumed to be a pointer to type <a href="#block_structures">Index</a>.</td>
                                                </tr>
                                                <tr>
                                                    <td>index_num</td>
                                                    <td>int</td>
                                                    <td>index number of entry in Leaf index block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On successful copy of the index entry</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If index_num is outside the range 0-62</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>vThis method gives the index_num'th <i>Index</i> of the IndLeaf block.</p>
                                        <h5><a data-toggle="collapse" href="#algo-leafgetentry"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-leafgetentry" class="collapse">
                                            <div class="code">
                                                <pre><code>int IndLeaf::getEntry(void *ptr, int index_num){

    /* get the data pointer(char *) corresponding to the block (of current object) from Buffer
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    

    // if the index_num is not in range of 0-(#Entries(in block)+1) return E_OUTOFBOUND

    // copy the index_num'th Index entry in block to memory ptr(ptr can be type casted appropriately if needed). 
    
    // return SUCCESS.
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
                                 
                                 <li>
                                    <div class="detail" id="leafsetentry">
                                        <h2><i>public:</i> setEntry (Leaf Index Buffer)</h2>
                                        <h5>Arguments:</h5>
                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>entry_ptr</td>
                                                    <td>void *</td>
                                                    <td>entry_ptr is assumed to be a pointer to type <a href="#block_structures">Index</a>.</td>
                                                </tr>
                                                <tr>
                                                    <td>index_num</td>
                                                    <td>int</td>
                                                    <td>index no. of entry in Leaf index block.</td>
                                                </tr>
                                            </table>
                                        </div>
                                        <h5>Return value:</h5>
                                        <div class="table-responsive">
                                            
                                            <table class="table table-bordered table-hover">
                                                <tr>
                                                    <td>SUCCESS</td>
                                                    <td>On successful copy of the index entry into the block</td>
                                                </tr>
                                                <tr>
                                                    <td>E_OUTOFBOUND</td>
                                                    <td>If index_num is outside the range 0-62</td>
                                                </tr>
                                            </table>
                                        </div>

                                        <h5>Description:</h5>
                                        <p>This method sets the index_num'th <i>>Index</i> of the IndLeaf block with the <i>Index</i> sent as argument.</p>
                                        <h5><a data-toggle="collapse" href="#algo-leafsetentry"><span class="fas fa-code"></span>Algorithm:</a></h5>
                                        <div id="algo-leafsetentry" class="collapse">
                                            <div class="code">
                                                <pre><code>int IndLeaf::setEntry(void *ptr, int index_num){
    /* get the data pointer(char *) corresponding to the block (of current object) from Buffer
    The private function <a href="buffer.html#getdataptr" target="_blank">get_buf_ptr</a>() is implemented for this purpose*/
    

    // if the index_num is not in range of 0-(#Entries(in block)+1) return E_OUTOFBOUND

    // copy the struct Index pointed by ptr to index_num'th entry in block.
}</code></pre>
                                            </div>
                                        </div>
                                    </div> 
                                </li>
                             
                             </ul>
            
                         </div>
                        
                        <div class="detail" id="misc">
                            <h2>Miscellaneous</h2>
                            <p>Here we give the definition of <i>RecID</i> and <i>IndexID</i> structures which will be of use in several modules of NITCbase. Variables of these structures will be declared in <a href="cache.html">Cache layer</a>, <a href="blockaccess.html">Block access layer</a> and <a href="b+tree.html">B+ tree layer</a>. </p>
                            <h4>RecId</h4>
                            <p>Every record in a relation in NITCbase is referenced using an id called <i>recId</i>. <i>recId</i> is a combination of block# and slot# where the record is stored in the disk.</p>
                            <div class="code">
                                <pre><code>typedef struct recId{
	int block;
	int slot;
} recId;</code></pre>
                            </div>
                            
                            <h4>IndexId</h4>
                            <p>An <i><a href="#block_structures">Index</a></i> for a relation is a tuple (Attribute value, block#, slot#), which is present in a <i><a href="../storage-model.html#leafind_blk">Leaf Index Block</a></i> of a <a href="https://en.wikipedia.org/wiki/B-tree">B+ tree</a>. Any such index can be referenced using an id called <i>IndexId</i>. <i>IndexId</i> is a combination of block#(block number of the corresponding leaf index block) and index#(offset of index in that block). </p>
                            <div class="code">
                                <pre><code>typedef struct IndexId{
	int block;
	int index;
} IndexId;</code></pre>
                            </div>
                            
                            <h4>compare()</h4>
                            <p></p>
                            <h5>Arguments:</h5>
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <tr>
                                        <td>attr1</td>
                                        <td>union Attribute</td>
                                        <td>first attribute value to be compared</td>
                                    </tr>
                                    <tr>
                                        <td>attr2</td>
                                        <td>union Attribute</td>
                                        <td>second attribute value to be compared</td>
                                    </tr>
                                    <tr>
                                        <td>attrType</td>
                                        <td>int</td>
                                        <td>type of the attribute (INT/FLOAT/STR)</td>
                                    </tr>
                                </table>
                            </div>
                            <h5>Return value:</h5>
                            <div class="table-responsive">

                                <table class="table table-bordered table-hover">
                                    <tr>
                                        <td>Negative integer</td>
                                        <td>If value in attr1 is less than the value in attr2<span style="color: dodgerblue">*</span></td>
                                    </tr>
                                    <tr>
                                        <td>0</td>
                                        <td>If value in attr1 is equal to the value in attr2 *</td>
                                    </tr>
                                    <tr>
                                        <td>Positive integer</td>
                                        <td>If value in attr1 is equal to the value in attr2 *</td>
                                    </tr>
                                </table>
                            </div>
                            <p><span style="color: dodgerblue">*</span> For string types, the comparision is performed with respect to lexicographic order.</p>
                            <h5>Description:</h5>
                            <p>This function compares two attributes of type <i><a href="#block_structures">union Attribute</a></i> depending on the type of the value.</p>
                            <h5><a data-toggle="collapse" href="#algo-compare"><span class="fas fa-code"></span>Algorithm:</a></h5>
                            <div id="algo-compare" class="collapse">
                                <div class="code">
<pre><code>int compare(union Attribute attr1, union Attribute attr2, int AttrType){
    /* if attrType == STR
       return strcmp(attr1.strval, attr2.strval); */
    
    /* else if attrType == INT -1, 0, 1 depending on whether the value attr1.ival
       is less than, equal to or greater than the value attr2.ival */ 
    
    /* else if attrType==FLOAT return -1, 0, 1 depending on whether the value attr1.fval
       is less than, equal to or greater than the value attr2.fval */ 
}
</code></pre>
                                </div>
                            </div>
                            
                        </div>
                                                
                        <!-- PAGE ENDS -->
                    </div>
                </div>
                <!-- END OF MAIN CONTENT -->
            </div>
        </div>
        
    </div>
    <!-- END OF CONTENT -->
</body>

</html>
