<!DOCTYPE HTML>
<html>

<head>
    <title>Buffer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
    
    
<body>
    <div class="header" id="top">
        <div id="title">
            <h1> <a href="/index.html">Nitcbase</a></h1>
            <!--h3> Database Management System</h3-->
        </div>
        
        <div id="menubar">
            <ul id="menu">
                <li> <a href="/index.html">Home</a></li>
                <li> <a href="/documentation.html"> Documentation</a></li>
                <li> <a href="/roadmap.html">Roadmap</a></li>
            </ul>
        </div>
    </div>
    
    <div id="content">
        <div id="design-content">
            <div id="getfreerecblk" class="design-detail">
                <h2>getFreeRecBlock</h2>
                <h3>Arguments:</h3>
                <p>NIL</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>RecBuffer *</td>
                            <td>Returns a pointer to a new RecBuffer object</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>If free disk block is not available. (disk full)</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                  <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">RecBuffer</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">getFreeRecBlock</span><span style="color: #000000; font-weight: bold">(){</span>

    <span style="color: #8f5902; font-style: italic">// search for the free block in disk iterating through block_alloc_map array.</span>

    <span style="color: #8f5902; font-style: italic">//if no disk block is free return NULL</span>

    <span style="color: #8f5902; font-style: italic">//get the free buffer block (you can use a helper function like getfreebuffer() in bufferclass)</span>

    <span style="color: #8f5902; font-style: italic">//if no free buffer block in memory return NULL</span>

    <span style="color: #8f5902; font-style: italic">//update the metainfo array corresponding to free buffer. block_alloc_map correspoding to free disk block.</span>

    <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">RecBuffer</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">newRecBuffer</span><span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87; font-weight: bold">new</span> <span style="color: #000000">RecBuffer</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">disk_free_block</span><span style="color: #000000; font-weight: bold">);</span> <span style="color: #8f5902; font-style: italic">//disk_free_block is the free disk block obtained from block_alloc_map.</span>

    <span style="color: #8f5902; font-style: italic">// return the RecBuffer object pointer.</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>
 


                </div> <!-- End of algo div -->
                <a href="code/buffer_getfreerecblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="getfreeindinternal" class="design-detail">
                <h2>getFreeIndInternalBlock</h2>
                <h3>Arguments:</h3>
                <p>NIL</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>IndInternal *</td>
                            <td>Returns a pointer to a new IndInternal object</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>If free disk block is not available. (disk full)</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndInternal</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">getFreeIndInternal</span><span style="color: #000000; font-weight: bold">(){</span>

    <span style="color: #8f5902; font-style: italic">// search for the free block in disk iterating through block_alloc_map array.</span>

    <span style="color: #8f5902; font-style: italic">//if no disk block is free return NULL</span>

    <span style="color: #8f5902; font-style: italic">//get the free buffer block (you can use a helper function like getfreebuffer() in bufferclass)</span>

    <span style="color: #8f5902; font-style: italic">//if no free buffer block in memory return NULL</span>

    <span style="color: #8f5902; font-style: italic">//update the metainfo array corresponding to free buffer. block_alloc_map correspoding to free disk block.</span>

    <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndInternal</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">newIndBuffer</span><span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87; font-weight: bold">new</span> <span style="color: #000000">IndInternal</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">disk_free_block</span><span style="color: #000000; font-weight: bold">);</span> <span style="color: #8f5902; font-style: italic">//disk_free_block is the free disk block obtained from block_alloc_map.</span>

    <span style="color: #8f5902; font-style: italic">// return the IndBuffer object pointer.</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>



                </div> <!-- End of algo div -->
                <a href="code/buffer_getfreeindinternalblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="getfreeindleaf" class="design-detail">
                <h2>getFreeIndLeafBlock</h2>
                <h3>Arguments:</h3>
                <p>NIL</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>IndLeaf *</td>
                            <td>Returns a pointer to a new IndLeaf object</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>If free disk block is not available. (disk full)</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndLeaf</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">getFreeIndLeaf</span><span style="color: #000000; font-weight: bold">(){</span>

    <span style="color: #8f5902; font-style: italic">// search for the free block in disk iterating through block_alloc_map array.</span>

    <span style="color: #8f5902; font-style: italic">//if no disk block is free return NULL</span>

    <span style="color: #8f5902; font-style: italic">//get the free buffer block (you can use a helper function like getfreebuffer() in bufferclass)</span>

    <span style="color: #8f5902; font-style: italic">//if no free buffer block in memory return NULL</span>

    <span style="color: #8f5902; font-style: italic">//update the metainfo array corresponding to free buffer. block_alloc_map correspoding to free disk block.</span>

    <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndLeaf</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">newIndBuffer</span><span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87; font-weight: bold">new</span> <span style="color: #000000">IndLeaf</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">disk_free_block</span><span style="color: #000000; font-weight: bold">);</span> <span style="color: #8f5902; font-style: italic">//disk_free_block is the free disk block obtained from block_alloc_map.</span>

    <span style="color: #8f5902; font-style: italic">// return the IndBuffer object pointer.</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>



                </div> <!-- End of algo div -->
                <a href="code/buffer_getfreeindleafblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="getrecblk" class="design-detail">
                <h2>getRecBlock</h2>
                <h3>Arguments:</h3>
                <table>
                    <tr>
                        <td>block_num</td>
                        <td>int</td>
                        <td>Disk block number of Record block.</td>
                    </tr>
                </table>
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>RecBuffer *</td>
                            <td>Returns a pointer to the RecBuffer object corresponding to the block_num</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>Provided block_num is not in the range of disk blocks.</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>If the requested block is not a valid Record Block (can be a free block or any Index Block)</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                  <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">RecBuffer</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">getRecBlock</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">){</span>
    <span style="color: #8f5902; font-style: italic">/*iterate in buffer blocks to know if one of the blocks in buffer already contains a disk block,</span>
<span style="color: #8f5902; font-style: italic">     #block_num(you can use a helper function getbufferblock(#block_num) to know if buffer contains a disk block corresond</span>
<span style="color: #8f5902; font-style: italic">      to #block_num).</span>
<span style="color: #8f5902; font-style: italic">    */</span>

	<span style="color: #8f5902; font-style: italic">/* if buffer doesn&#39;t conain disk block #block_num, load it to buffer and do necessary initialisations in buffer meta info</span>
<span style="color: #8f5902; font-style: italic">    (one can use load(#block_num) as helper function in buffer class to load the disk block to one of the free block(blocks[i]) in </span>
<span style="color: #8f5902; font-style: italic">    buffer and do necessary initialisations in buffer meta info)*/</span>

    <span style="color: #8f5902; font-style: italic">//if the block corresponding to #block_num is not a REC block return NULL</span>

    <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">RecBuffer</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">newRecBuffer</span><span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87; font-weight: bold">new</span> <span style="color: #000000">RecBuffer</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">);</span>

    <span style="color: #8f5902; font-style: italic">// return the RecBuffer object pointer.</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>
 


                </div> <!-- End of algo div -->
                <a href="code/buffer_getrecblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="getindblk" class="design-detail">
                <h2>getIndBlock</h2>
                <h3>Arguments:</h3>
                <table>
                    <tr>
                        <td>block_num</td>
                        <td>int</td>
                        <td>Disk block number of Index block.</td>
                    </tr>
                </table>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>IndBuffer *</td>
                            <td>Returns a pointer to the IndInternal/IndLeaf object corresponding to the block_num <br>
                                (Returns an object of type IndInternal if the block is an internal Index block / returns an object of type IndLeaf if the block is a Leaf Index block). <br>
                                <b>Note: </b>An object of child type can be assigned to a parent variable.
                            </td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>Provided block_num is not in the range of disk blocks.</td>
                        </tr>
                        <tr>
                            <td>NULL</td>
                            <td>If the requested block is not a valid Index Block (can be a free block or a Record Block)</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                   <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndBuffer</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">getIndBlock</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">){</span>
    <span style="color: #8f5902; font-style: italic">/*iterate in buffer blocks to know if one of the blocks in buffer already contains a disk block,</span>
<span style="color: #8f5902; font-style: italic">     #block_num(you can use a helper function getbufferblock(#block_num) to know if buffer contains a disk block corresond</span>
<span style="color: #8f5902; font-style: italic">      to #block_num).</span>
<span style="color: #8f5902; font-style: italic">    */</span>

    <span style="color: #8f5902; font-style: italic">/* if buffer doesn&#39;t conain disk block #block_num, load it to buffer and do necessary initialisations in buffer meta info</span>
<span style="color: #8f5902; font-style: italic">    (one can use load(#block_num) as helper function in buffer class to load the disk block to one of the free block(blocks[i]) in </span>
<span style="color: #8f5902; font-style: italic">    buffer and do necessary initialisations in buffer meta info)*/</span>

    <span style="color: #8f5902; font-style: italic">//if the block corresponding to #block_num is not a INDLEAF/INDINTERNAL block return NULL</span>

    <span style="color: #204a87; font-weight: bold">class</span> <span style="color: #000000">IndBuffer</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">newIndBuffer</span><span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87; font-weight: bold">new</span> <span style="color: #000000">IndBuffer</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">);</span>

    <span style="color: #8f5902; font-style: italic">// return the IndBuffer object pointer.</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/buffer_getindblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="deleteblk" class="design-detail">
                <h2>deleteBlock</h2>
                <h3>Arguments:</h3>
                <table>
                    <tr>
                        <td>block_num</td>
                        <td>int</td>
                        <td>Disk block number of block that has to be deleted.</td>
                    </tr>
                </table>
                
                <div class=retval>
                    <h3>Return type:</h3>
                    <p>void</p>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">deleteBlock</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">){</span>
    <span style="color: #8f5902; font-style: italic">// if block_num &lt; 0 OR block_num &gt;= DISK_BLOCKS return</span>

    <span style="color: #8f5902; font-style: italic">/* iterate through buffer blocks to know if disk block #block_num is present in Buffer(getbufferblock(block_num) method call can</span>
<span style="color: #8f5902; font-style: italic">    be used for the same).*/</span>

    <span style="color: #8f5902; font-style: italic">//if buffer does not contain disk block #block_num release the buffer block using releaseBlock(int block_num) method call</span>

    <span style="color: #8f5902; font-style: italic">//set the block_alloc_map array element correspond to block_num as UNUSED</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>



                </div> <!-- End of algo div -->
                <a href="code/buffer_deleteblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="releaseblk" class="design-detail">
                <h2>releaseBlock</h2>
                <h3>Arguments:</h3>
                <table>
                    <tr>
                        <td>block_num</td>
                        <td>int</td>
                        <td>Disk block number of block that has to be released from buffer.</td>
                    </tr>
                </table>
                
                <div class=retval>
                    <h3>Return type:</h3>
                    void
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                    
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">releaseBlock</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">block_num</span><span style="color: #000000; font-weight: bold">){</span>
    <span style="color: #8f5902; font-style: italic">// if block_num &lt; 0 OR block_num &gt;= DISK_BLOCKS return </span>

    <span style="color: #8f5902; font-style: italic">/* iterate through buffer blocks to know if disk block #block_num is present in Buffer(getbufferblock(block_num) method call can</span>
<span style="color: #8f5902; font-style: italic">    be used for the same).*/</span>

    <span style="color: #8f5902; font-style: italic">//if buffer does not contain disk block #block_num return </span>

    <span style="color: #8f5902; font-style: italic">// if the dirty field in metainfo of buffer block correspond to #block_num is set to true, commit the block back to disk.</span>

    <span style="color: #8f5902; font-style: italic">// free the buffer block correspond to #block_num in metainfo array.</span>

<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/buffer_releaseblk.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
        </div>
    </div>
    
</body>

</html>