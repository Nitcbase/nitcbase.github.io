<!DOCTYPE HTML>
<html>

<head>
    <title>Schema layer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
    
    
<body>
    <div class="header" id="top">
        <div id="title">
            <h1> <a href="/index.html">Nitcbase</a></h1>
            <!--h3> Database Management System</h3-->
        </div>
        
        <div id="menubar">
            <ul id="menu">
                <li> <a href="/index.html">Home</a></li>
                <li> <a href="/documentation.html"> Documentation</a></li>
                <li> <a href="/roadmap.html">Roadmap</a></li>
            </ul>
        </div>
    </div>
    
    <div id="content">
        <div id="design-content">
            <div id="createrel" class="design-detail">
                <h2>Create Relation</h2>
                <h3>Arguments:</h3>
                <p>relName (char[ATTR_SIZE]), nAttrs (int), attrs (char [ ][ATTR_SIZE]), attrtype (int [ ])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful creation of the relation</td>
                        </tr>
                        <tr>
                            <td>E_RELEXIST</td>
                            <td>If the relation with name relName already exists.</td>
                        </tr>
                        <tr>
                            <td>E_DUPLICATEATTR</td>
                            <td>If two any two of the given attributes have same name.</td>
                        </tr>
                        <tr>
                            <td>E_DISKFULL</td>
                            <td>If disk space is not sufficient for creating the new relation.</td>
                        </tr>
                        
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">createRel</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">relname</span><span style="color: #000000; font-weight: bold">[],</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">nAttrs</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">attrs</span><span style="color: #000000; font-weight: bold">[][</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">attrtype</span><span style="color: #000000; font-weight: bold">[]){</span>

    <span style="color: #8f5902; font-style: italic">// let union Attribute relname_val</span>
    <span style="color: #8f5902; font-style: italic">// copy the relname into relname_val(type = string)</span>

    <span style="color: #8f5902; font-style: italic">// let recId targetrelid</span>
    <span style="color: #8f5902; font-style: italic">/* using linear_search() of ba_layer, search the relation relcat (with Openrelid = 0), for attribute value of attribute &quot;RelName&quot; to be</span>
<span style="color: #8f5902; font-style: italic">     equal to relname_val. let the return value of linear_search be targetrelid*/</span>

    <span style="color: #8f5902; font-style: italic">// if targetrelid.block != -1 (i.e &quot;relcat&quot; relation already contains a relation with relation name as relname) </span>
        <span style="color: #8f5902; font-style: italic">// return E_RELEXIST</span>

    <span style="color: #8f5902; font-style: italic">// by iterating though all the attributes of attrs[] array </span>
        <span style="color: #8f5902; font-style: italic">// if any two strings of attrs[] array have same string value, return E_DUPLICATEATTR (i.e 2 attributes having same value)</span>

    <span style="color: #8f5902; font-style: italic">// let union Attribute relcatrecord[6] (this is the record in relationcatalog corresponding to new relation)</span>
    <span style="color: #8f5902; font-style: italic">// fill relcatrecord appropriately with as that of new relation.</span>

    <span style="color: #8f5902; font-style: italic">//retval = ba_insert(0,relcatrecord);</span>
    <span style="color: #8f5902; font-style: italic">// if ba_insert fails return retval</span>

    <span style="color: #8f5902; font-style: italic">// iterate through 0 to nAttrs-1 :</span>
        <span style="color: #8f5902; font-style: italic">// let union Attribute attrcatrec[6] (this is the record in attrcatalog corresponding to i&#39;th Attribute)</span>
        <span style="color: #8f5902; font-style: italic">/* update attrcatrec corresponding to i&#39;th attribute of the relation</span>
<span style="color: #8f5902; font-style: italic">         (Relation name = relname, Attribute name=attrs[i], type= attrtype[i], pflag=-1, rootblock= -1, offset= i).*/</span>

        <span style="color: #8f5902; font-style: italic">// retval = ba_insert(1,attrcatrec);</span>
        <span style="color: #8f5902; font-style: italic">/* if ba_insert fails:</span>
<span style="color: #8f5902; font-style: italic">            delete targetrelation by calling deleterel(targetrel)</span>
<span style="color: #8f5902; font-style: italic">            return E_DISKFULL</span>
<span style="color: #8f5902; font-style: italic">        */</span>

    <span style="color: #8f5902; font-style: italic">// return SUCCESS</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/createrel.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="deleterel" class="design-detail">
                <h2>Delete Relation</h2>
                <h3>Arguments:</h3>
                <p>relName (char[ATTR_SIZE])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful deletion of the relation.</td>
                        </tr>
                        <tr>
                            <td>E_RELOPEN</td>
                            <td>If the relation is open.</td>
                        </tr>
                        <tr>
                            <td>E_RELNOTEXIST</td>
                            <td>If the relation does not exist</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">deleterel</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">relname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">]){</span>
    <span style="color: #8f5902; font-style: italic">// get the relation&#39;s open relation id(let it be srelid), using getRelid() method of Openreltable</span>
    <span style="color: #8f5902; font-style: italic">// if relation is opened in open relation table, return E_RELOPEN</span>

    <span style="color: #8f5902; font-style: italic">// retval  = ba_delete(relname);</span>
    <span style="color: #8f5902; font-style: italic">// return retval</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/deleterel.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="createind" class="design-detail">
                <h2>Create Index</h2>
                <h3>Arguments:</h3>
                <p>relName (char[ATTR_SIZE]), attr (char[ATTR_SIZE])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful creation of B+ tree.</td>
                        </tr>
                        <tr>
                            <td>E_RELNOTOPEN</td>
                            <td>If the relation is not open.</td>
                        </tr>
                        <tr>
                            <td>E_ATTRNOTEXIST</td>
                            <td>If the attribute with name attr does not exist.</td>
                        </tr>
                        <tr>
                            <td>E_DISKFULL</td>
                            <td>If there is no enough space in the disk to create the tree</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">createindex</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">relname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">attr</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">]){</span>
    <span style="color: #8f5902; font-style: italic">// get the src relation&#39;s open relation id, using getRelid() method of Openreltable.</span>
    <span style="color: #8f5902; font-style: italic">// if source not opened in open relation table, return E_RELNOTOPEN</span>

    <span style="color: #8f5902; font-style: italic">// retval=bplus_create(relid,attr);</span>
    <span style="color: #8f5902; font-style: italic">// return retval</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/createindex.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="dropind" class="design-detail">
                <h2>Drop Index</h2>
                <h3>Arguments:</h3>
                <p>relName (char[ATTR_SIZE]), attr (char[ATTR_SIZE])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful deletion of the B+ tree</td>
                        </tr>
                        <tr>
                            <td>E_RELNOTOPEN</td>
                            <td>If the relation is not open.</td>
                        </tr>
                        <tr>
                            <td>E_ATTRNOTEXIST</td>
                            <td>If the attribute with name attr does not exist.</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">dropindex</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">relname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">attr</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">]){</span>
    <span style="color: #8f5902; font-style: italic">// get the src relation&#39;s open relation id, using getRelid() method of Openreltable.</span>
    <span style="color: #8f5902; font-style: italic">// if source opened in open relation table, return E_RELOPEN</span>

    <span style="color: #8f5902; font-style: italic">// retval=bplus_destroy(relid,attr);</span>
    <span style="color: #8f5902; font-style: italic">// return retval</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/dropindex.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="renamerel" class="design-detail">
                <h2>Rename Relation</h2>
                <h3>Arguments:</h3>
                <p>oldRelName (char[ATTR_SIZE]), newRelName (char[ATTR_SIZE])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful renaming of the relation</td>
                        </tr>
                        <tr>
                            <td>E_RELOPEN</td>
                            <td>If the relation is open.</td>
                        </tr>
                        <tr>
                            <td>E_RELNOTEXIST</td>
                            <td>If the relation with name oldRelName does not exist</td>
                        </tr>
                        <tr>
                            <td>E_RELEXIST</td>
                            <td>If the relation with name newRelName already exists</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">renamerel</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">Oldrelname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">Newrelname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">]){</span>
    <span style="color: #8f5902; font-style: italic">// get the relation&#39;s open relation id(let it be srelid), using getRelid() method of Openreltable</span>
    <span style="color: #8f5902; font-style: italic">// if relation is opened in open relation table, return E_RELOPEN</span>

    <span style="color: #8f5902; font-style: italic">//retval= ba_renamerel(Oldrelname,Newrelname);</span>
    <span style="color: #8f5902; font-style: italic">// return retval</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/renamerel.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
            <div id="renameattr" class="design-detail">
                <h2>Rename Attribute</h2>
                <h3>Arguments:</h3>
                <p>relName (char[ATTR_SIZE]),oldAttrName (char[ATTR_SIZE]) ,newAttrName (char[ATTR_SIZE])</p>
                
                <div class=retval>
                    <h3>Return value:</h3>
                    <table>
                        <tr>
                            <td>SUCCESS</td>
                            <td>On successful renaming of the attribute</td>
                        </tr>
                        <tr>
                            <td>E_RELOPEN</td>
                            <td>If the relation is open.</td>
                        </tr>
                        <tr>
                            <td>E_RELNOTEXIST</td>
                            <td>If the relation with name relName does not exist</td>
                        </tr>
                        <tr>
                            <td>E_ATTRNOTEXIST</td>
                            <td>If the attribute with name oldAttrName does not exist</td>
                        </tr>
                        <tr>
                            <td>E_ATTREXIST</td>
                            <td>If the attribute with name newAttrName already exists</td>
                        </tr>
                    </table>
                </div>
                
                <h3>Description:</h3>
                <p>Description of the function/method</p>
                
                <h3>Algorithm:</h3>
                <div class="algo">
                    <!-- HTML from code is generated from http://hilite.me/ with configuration:
                        source code:    our code
                        language:       C++
                        style:          tango
                        CSS:            border:solid gray;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;
                        Line numbers:   checked (check box)
                        finally clicking on highlight! ;-)
                        Copy the code from HTML section and paste n this div. Simple :-).
                    -->
                   
                    <!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid grey;border-width:.1em .1em .1em .5em;padding:.2em .6em;border-radius:4px;"><table><tr><td><pre style="margin: 0; line-height: 125%">1
2
3
4
5
6
7</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">renameattr</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">relname</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">OldAttrName</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">ATTR_SIZE</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #204a87; font-weight: bold">char</span> <span style="color: #000000">NewAttrName</span><span style="color: #000000; font-weight: bold">){</span>
    <span style="color: #8f5902; font-style: italic">// get the relation&#39;s open relation id(let it be srelid), using getRelid() method of Openreltable</span>
    <span style="color: #8f5902; font-style: italic">// if relation is opened in open relation table, return E_RELOPEN</span>
    
    <span style="color: #8f5902; font-style: italic">// retval= ba_renameattr(relname,OldAttrName,NewAttrName);</span>
    <span style="color: #8f5902; font-style: italic">// return retval</span>
<span style="color: #000000; font-weight: bold">}</span>
</pre></td></tr></table></div>


                </div> <!-- End of algo div -->
                <a href="code/renameattr.cpp" target="_blank" download>Click here</a> to download the code.
            </div>
            
        </div>
    </div>
    
</body>

</html>